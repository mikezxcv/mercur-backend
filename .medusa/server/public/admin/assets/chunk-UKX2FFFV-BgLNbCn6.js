import{u as y}from"./chunk-C76H5USB-Di1OZBXz.js";import{T as N,L as R}from"./chunk-SNDSWB6B-B3KKgOlB.js";import{D as w}from"./chunk-HQKGZADC-DuUbCtSs.js";import{a as S,N as T}from"./chunk-EMIHDNB7-DCWfH-IR.js";import{j as e,gh as C,L as M,B as _,ao as I,r as j,bI as z,bJ as L,bK as O}from"./index-Bxfpjf1r.js";var Q=({prefix:g,pageSize:n=20})=>{const t=y(["offset","q","order","created_at","updated_at"],g),{offset:r,q:a,order:x,created_at:o,updated_at:s}=t;return{searchParams:{limit:n,offset:r?Number(r):0,order:x,created_at:o?JSON.parse(o):void 0,updated_at:s?JSON.parse(s):void 0,q:a},raw:t}},A=({variant:g="country",isPending:n,action:t,count:r=0,table:a,queryObject:x,prefix:o,children:s})=>{if(n)return e.jsxs("div",{className:"flex flex-col divide-y",children:[Array.from({length:3}).map((l,c)=>e.jsx("div",{className:"bg-ui-bg-field-component h-[52px] w-full animate-pulse"},c)),e.jsx(C,{layout:"fit"})]});const i=Object.values(x).filter(l=>!!l).length===0,u=!n&&r===0&&!i,d=!n&&r===0&&i,{pageIndex:f,pageSize:p}=a.getState().pagination;return e.jsxs("div",{className:"flex flex-col divide-y",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-x-4 gap-y-3 px-6 py-4 md:flex-row md:items-center",children:[e.jsx("div",{children:s}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[!d&&e.jsx("div",{className:"flex w-full items-center gap-x-2 md:w-fit",children:e.jsx(w,{keys:["updated_at","created_at"],prefix:o})}),e.jsx(M,{to:t.to,children:e.jsx(_,{size:"small",variant:"secondary",children:t.label})})]})]}),u&&e.jsx(S,{}),d&&e.jsx(T,{}),!d&&!u?n?Array.from({length:3}).map((l,c)=>e.jsx("div",{className:"bg-ui-bg-field-component h-[60px] w-full animate-pulse"},c)):a.getRowModel().rows.map(l=>e.jsx(N,{variant:g,taxRegion:l.original,role:"row","aria-rowindex":l.index},l.id)):null,!d&&e.jsx(R,{prefix:o,canNextPage:a.getCanNextPage(),canPreviousPage:a.getCanPreviousPage(),count:r,nextPage:a.nextPage,previousPage:a.previousPage,pageCount:a.getPageCount(),pageIndex:f,pageSize:p})]})},D=({data:g=[],count:n=0,pageSize:t=10,prefix:r})=>{const[a,x]=I(),o=`${r?`${r}_`:""}offset`,s=a.get(o),[{pageIndex:i,pageSize:u},d]=j.useState({pageIndex:s?Math.ceil(Number(s)/t):0,pageSize:t}),f=j.useMemo(()=>({pageIndex:i,pageSize:u}),[i,u]);j.useEffect(()=>{const c=s?Math.ceil(Number(s)/t):0;c!==i&&d(m=>({...m,pageIndex:c}))},[s,t,i]);const p=c=>{const m=c(f),{pageIndex:P,pageSize:v}=m;return x(h=>{if(!P)return h.delete(o),h;const b=new URLSearchParams(h);return b.set(o,String(P*v)),b}),d(m),m};return{table:z({data:g,columns:[],pageCount:Math.ceil(n/u),state:{pagination:f},getCoreRowModel:L(),onPaginationChange:p,getPaginationRowModel:O(),manualPagination:!0})}};export{A as T,D as a,Q as u};
